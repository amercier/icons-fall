language: node_js
node_js: 4
cache:
  directories:
  - bower_components
  - node_modules
after_success: npm run build
deploy:
- provider: script
  script: htpasswd -b -n "$STAGING_USERNAME" "$STAGING_PASSWORD" > dist/.htpasswd && ./deploy-ftp.sh dist ftp.iconsfall.com /staging
  skip_cleanup: true
  on:
    branch: master
- provider: script
  script: rm -f dist/.htpasswd && ./deploy-ftp.sh dist ftp.iconsfall.com /www
  skip_cleanup: true
  on:
    branch: master
    tags: true
